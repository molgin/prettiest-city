setTimeout(function(){
  $("div.city-name").fadeOut(400);
  setTimeout(function(){
    loadNewMatchup();
  }, 400);
}, 500);

function loadNewMatchup() {
  var $pano1 = $("#pano-1")
  var $pano2 = $("#pano-2")
  $pano1.attr("style", "");
  $pano2.attr("style", "");
  $pano1.html("<%= j render 'spinner' %>");
  $pano2.html("<%= j render 'spinner' %>");
  $("section#view-2").before($("section#view-1"));

  maybeSwapViews();
  new City($("select#city-1").attr("city-id"), 1);
  new City($("select#city-2").attr("city-id"), 2);
}

function maybeSwapViews() {
  if (Math.floor(Math.random() * 2)) {
    $("section#view-1").before($("section#view-2"));
  }
}